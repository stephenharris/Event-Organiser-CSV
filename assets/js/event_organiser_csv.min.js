/*! event-organiser-csv 0.1.0 */
(function(e){e(document).ready(function(){var t={};if(t.errorMessage=function(t){e("#eo-csv-error p").text(t),e("#eo-csv-error").show(),e("#eo-csv-submit").attr("disabled","disabled").hide()},t.clearError=function(){e("#eo-csv-error p").text(""),e("#eo-csv-error").hide(),e("#eo-csv-submit").removeAttr("disabled").show()},e(".eo-first-row-is-header").on("change",function(){e(".eo-csv-row-0").toggleClass("eo-csv-row-is-header",e(this).is(":checked"))}),e(".eo-csv-table-wrap").on("change",".eo-csv-col-map",function(){var t=e(this).parent("td").find(".eo-csv-col-map-meta");t.toggle("post_meta"===e(this).val()),t.attr("placeholder",e(this).find("option:selected").text())}),e('input[name="delimiter"]').change(function(){t.clearError();var o;switch(e(this).val()){case"space":o=" ";break;case"tab":o="	";break;default:o=","}if(!eo_csv_data.hasOwnProperty("input")||!eo_csv_data.input)return t.errorMessage("Cannot read file content. Please check that the uploaded file is CSV encoded."),void 0;var a;try{a=e.csv.toArrays(eo_csv_data.input,{delimiter:'"',separator:o})}catch(r){return t.errorMessage("The CSV file is invalid with the chosen delimiter. Please try a different one."),console.log(r),e(".eo-csv-table-wrap table thead").html(""),e(".eo-csv-table-wrap table tfoot").html(""),e(".eo-csv-table-wrap table tbody").html(""),void 0}for(var n=a[0].length,i="<tr>",s=0;n>s;s++){var l="",c=s;if(0===c)l="A";else for(;c>=0;){var d=c%26;c=Math.floor(c/26)-1,l=String.fromCharCode(65+d)+l}i+="<th>"+l+"</th>"}i+="</tr>";for(var v="",p=0;a.length>p;p++){for(v+='<tr class="eo-csv-row-'+p+'">',s=0;n>s;s++){var u=a[p][s];v+='<td><div class="eo-csv-cell-content">'+u+"</div></td>"}v+="</tr>"}var h="<tr>";for(s=0;n>s;s++)h+='<td><select class="eo-csv-col-map" name="column_map['+s+'][col]" style="width: 100%;" data-eo-csv-col="1">'+'<option value="0"> Please select </option>'+'<option value="post_title"> Title </option>'+'<option value="start"> Start </option>'+'<option value="end"> End </option>'+'<option value="schedule_last"> Recur Until </option>'+'<option value="schedule"> Recurrence Schedule </option>'+'<option value="frequency"> Recurrence Frequency </option>'+'<option value="schedule_meta"> Schedule Meta </option>'+'<option value="post_content"> Content </option>'+'<option value="event-venue"> Venue </option>'+'<option value="event-category"> Categories </option>'+'<option value="event-tags"> Tags </option>'+'<option value="include"> Include dates </option>'+'<option value="exclude"> Exclude dates </option>'+'<option value="post_meta"> Post Meta </option>'+"</select>"+'<input type="text" name="column_map['+s+'][other]" style="display:none" value="" class="eo-csv-col-map-meta">'+"</td>";h+="</tr>";var f=e(".eo-csv-table-wrap table");f.find("thead").html(i),f.find("tbody").html(v),f.find("tfoot").html(h)}),eo_csv_data.hasOwnProperty("input")&&eo_csv_data.input)for(var o=[" ","	",","],a=0;o.length>a;a++){var r=o[a];try{e.csv.toArrays(eo_csv_data.input,{delimiter:'"',separator:r}),e('input[name="delimiter"]').eq(0).click();break}catch(n){continue}}else t.errorMessage("Cannot read file content. Please check that the uploaded file is CSV encoded.")})})(jQuery);