/*! event-organiser-csv 0.1.0 */
(function(e){e(document).ready(function(){var o={};if(o.errorMessage=function(o){e("#eo-csv-error p").text(o),e("#eo-csv-error").show(),e("#eo-csv-submit").attr("disabled","disabled").hide()},o.clearError=function(){e("#eo-csv-error p").text(""),e("#eo-csv-error").hide(),e("#eo-csv-submit").removeAttr("disabled").show()},e(".eo-first-row-is-header").on("change",function(){e(".eo-csv-row-0").toggleClass("eo-csv-row-is-header",e(this).is(":checked"))}),e(".eo-csv-table-wrap").on("change",".eo-csv-col-map",function(){var o=e(this).parent("td").find(".eo-csv-col-map-meta");o.toggle("post_meta"===e(this).val()),o.attr("placeholder",e(this).find("option:selected").text())}),e('input[name="delimiter"]').change(function(){o.clearError();var t;switch(e(this).val()){case"space":t=" ";break;case"tab":t="	";break;default:t=","}if(!eo_csv_data.hasOwnProperty("input")||!eo_csv_data.input)return o.errorMessage("Cannot read file content. Please check that the uploaded file is CSV encoded."),void 0;var a;try{a=e.csv.toArrays(eo_csv_data.input,{delimiter:'"',separator:t})}catch(l){return o.errorMessage("The CSV file is invalid with the chosen delimiter. Please try a different one."),console.log(l),e(".eo-csv-table-wrap table thead").html(""),e(".eo-csv-table-wrap table tfoot").html(""),e(".eo-csv-table-wrap table tbody").html(""),void 0}for(var c=a[0].length,r="<tr>",s=0;c>s;s++){var n="",i=s;if(0===i)n="A";else for(;i>=0;){var v=i%26;i=Math.floor(i/26)-1,n=String.fromCharCode(65+v)+n}r+="<th>"+n+"</th>"}r+="</tr>";for(var d="",p=0;a.length>p;p++){for(d+='<tr class="eo-csv-row-'+p+'">',s=0;c>s;s++){var u=a[p][s];d+='<td><div class="eo-csv-cell-content">'+u+"</div></td>"}d+="</tr>"}var h="<tr>";for(s=0;c>s;s++)h+='<td><select class="eo-csv-col-map" name="column_map['+s+'][col]" style="width: 100%;" data-eo-csv-col="1">'+'<option value="0"> Please select </option>'+'<option value="post_title">'+eo_csv.locale.title+"</option>"+'<option value="start"> '+eo_csv.locale.start+" </option>"+'<option value="end"> '+eo_csv.locale.end+" </option>"+'<option value="schedule_last"> '+eo_csv.locale.recur_until+" </option>"+'<option value="schedule">'+eo_csv.locale.recur_schedule+"</option>"+'<option value="frequency">'+eo_csv.locale.recur_freq+"</option>"+'<option value="schedule_meta">'+eo_csv.locale.schedule_meta+"</option>"+'<option value="post_content">'+eo_csv.locale.content+"</option>"+'<option value="event-venue">'+eo_csv.locale.venue+"</option>"+'<option value="event-category"> '+eo_csv.locale.categories+" </option>"+'<option value="event-tags">'+eo_csv.locale.tags+"</option>"+'<option value="include">'+eo_csv.locale.include_dates+"</option>"+'<option value="exclude">'+eo_csv.locale.exclude_dates+"</option>"+'<option value="post_meta">'+eo_csv.locale.post_meta+"</option>"+"</select>"+'<input type="text" name="column_map['+s+'][other]" style="display:none" value="" class="eo-csv-col-map-meta">'+"</td>";h+="</tr>";var _=e(".eo-csv-table-wrap table");_.find("thead").html(r),_.find("tbody").html(d),_.find("tfoot").html(h)}),eo_csv_data.hasOwnProperty("input")&&eo_csv_data.input)for(var t=[" ","	",","],a=0;t.length>a;a++){var l=t[a];try{e.csv.toArrays(eo_csv_data.input,{delimiter:'"',separator:l}),e('input[name="delimiter"]').eq(0).click();break}catch(c){continue}}else o.errorMessage("Cannot read file content. Please check that the uploaded file is CSV encoded.")})})(jQuery);